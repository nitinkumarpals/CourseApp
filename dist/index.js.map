{"version":3,"sources":["../src/index.ts","../src/routes/user/user.ts","../src/db/db.ts","../src/schema/schema.ts","../src/middlewares/user.ts","../src/routes/user/admin.ts","../src/middlewares/admin.ts","../src/routes/course/course.ts"],"sourcesContent":["import express from \"express\";\nimport dotenv from \"dotenv\";\ndotenv.config();\nimport {userRouter} from \"./routes/user/user\";\nimport { adminRouter } from \"./routes/user/admin\";\nimport { courseRouter } from \"./routes/course/course.js\";\nimport mongoose from \"mongoose\";\nconst app = express();\n\napp.use(express.json());\napp.use(\"/user\", userRouter);\napp.use(\"/course\", courseRouter);\napp.use(\"/admin\", adminRouter);\napp.get(\"/\", (req, res) => {\n  res.send(`\n    <html>\n      <head>\n        <title>Welcome to my app!</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            text-align: center;\n          }\n        </style>\n      </head>\n      <body>\n        <h1>Welcome to my app!</h1>\n        <p>This is a courseApp.</p>\n      </body>\n    </html>\n  `);\n});\nasync function start() {\n  await mongoose.connect(process.env.MONGODB_URI || \"\");\n  console.log(\"connected to db\");\n  app.listen(3000, () => {\n    console.log(\"Example app listening on port 3000!\");\n  });\n}\n\nstart();\n","import { Router } from \"express\";\nexport const userRouter = Router();\nimport { userModel, courseModel, purchaseModel } from \"../../db/db\";\nimport { signinSchema, signupSchema } from \"../../schema/schema\";\nimport jwt from \"jsonwebtoken\";\nimport { userMiddleware } from \"../../middlewares/user\";\n\nuserRouter.post(\"/signup\", async function (req, res) {\n  try {\n    const body = req.body;\n    const parsedBody = signupSchema.safeParse(body);\n    if (!parsedBody.success) {\n      return res.status(400).json({\n        success: false,\n        message:\n          \"Validation error: \" +\n          parsedBody.error.errors\n            .map((err) => `${err.path[0]} ${err.message}`)\n            .join(\", \"),\n      });\n    }\n    const { email, password, firstName, lastName } = parsedBody.data;\n    const user = await userModel.create({\n      email,\n      password,\n      firstName,\n      lastName,\n      courses: [],\n    });\n    const token = jwt.sign(\n      {\n        email: user.email,\n        id: user._id,\n      },\n      process.env.JWT_SECRET || \"\"\n    );\n    //do cookies\n    res.status(200).json({\n      user,\n      token: token,\n      message: \"user created successfully\",\n    });\n  } catch (error: Error | any) {\n    if (error instanceof Error && (error as any).code === 11000) {\n      // Unique constraint error code\n      return res.status(400).json({\n        success: false,\n        error: \"Email already exists\",\n        message: \"Email already in use\",\n      });\n    } else {\n      // Handle other errors\n      return res.status(500).json({\n        success: false,\n        error: error.message,\n        message: \"Internal server error\",\n      });\n    }\n  }\n});\n\nuserRouter.post(\"/signin\", async function (req, res) {\n  try {\n    const body = req.body;\n    const parsedBody = signinSchema.safeParse(body);\n    if (!parsedBody.success) {\n      return res.status(400).json({\n        success: false,\n        message:\n          \"Validation error: \" +\n          parsedBody.error.errors\n            .map((err) => `${err.path[0]} ${err.message}`)\n            .join(\", \"),\n      });\n    }\n    const { email, password } = parsedBody.data;\n    const user = await userModel.findOne({ email });\n    if (!user) {\n      return res.status(400).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n    }\n    if (user.password !== password) {\n      return res.status(400).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n    }\n\n    const token = jwt.sign(\n      {\n        email: user.email,\n        id: user._id,\n      },\n      process.env.JWT_SECRET || \"\"\n    );\n    //do cookies\n    return res.status(200).json({\n      success: true,\n      token: token,\n      message: \"Signin successful\",\n      user,\n    });\n  } catch (error: Error | any) {\n    return res.status(500).json({\n      success: false,\n      error: error.message,\n      message: \"Internal server error\",\n    });\n  }\n});\n\nuserRouter.get(\"/purchases\", userMiddleware, async function (req, res) {\n  try {\n    const userId = req.userId;\n    const purchases = await purchaseModel.find({ userId });\n    const courseIds = purchases.map((purchase) => purchase.courseId);\n    const courses = await courseModel.find({ _id: { $in: courseIds } });\n    res.status(200).json({ courses });\n  } catch (error: Error | any) {\n    res.status(500).json({\n      message: \"Error getting purchases\",\n      error: error.message,\n    });\n  }\n});\n","import mongoose, { Types } from \"mongoose\";\nconst ObjectId = Types.ObjectId;\nimport dotenv from \"dotenv\";\ndotenv.config();\nif (!process.env.MONGODB_URI) {\n  throw new Error(\"MONGODB_URI environment variable is not set\");\n}\nmongoose.connect(process.env.MONGODB_URI);\nimport { Schema } from \"mongoose\";\nconst userSchema = new Schema({\n  email: { type: String, required: true, unique: true },\n  password: { type: String, required: true },\n  firstName: String,\n  lastName: String,\n  courses: [ObjectId],\n});\n\nconst adminSchema = new Schema({\n  email: { type: String, required: true, unique: true },\n  password: { type: String, required: true },\n  firstName: String,\n  lastName: String,\n  courses: [ObjectId],\n});\n\nconst courseSchema = new Schema({\n  title: String,\n  description: String,\n  price: Number,\n  imageUrl: String,\n  creatorId: ObjectId,\n});\n\nconst purchaseSchema = new Schema({\n  userId: ObjectId,\n  courseId: ObjectId,\n});\n\nexport const userModel = mongoose.model(\"User\", userSchema);\nexport const adminModel = mongoose.model(\"Admin\", adminSchema);\nexport const courseModel = mongoose.model(\"Course\", courseSchema);\nexport const purchaseModel = mongoose.model(\"Purchase\", purchaseSchema);\n","import { z } from \"zod\";\n\nexport const signupSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  firstName: z.string().min(1),\n  lastName: z.string().min(1),\n});\n\nexport const signinSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n});\n\nexport const courseSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  price: z.number(),\n  imageUrl: z.string().optional(),\n  creatorId: z.string().optional(),\n  courseId: z.string().optional(),\n});","import jwt, { JwtPayload } from \"jsonwebtoken\";\nimport { Request, Response, NextFunction } from \"express\";\n\nexport const userMiddleware = async (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  try {\n    const token = req.headers.authorization?.split(\" \")[1];\n    if (!token) {\n      throw new Error(\"Authorization token is missing or invalid\");\n    }\n    const decoded = jwt.verify(\n      token,\n      process.env.JWT_SECRET || \"\"\n    ) as JwtPayload;\n    if (decoded) {\n      req.userId = decoded.id;\n      next();\n    } else {\n      throw new Error(\"Invalid token payload or jwt secret\");\n    }\n  } catch (error) {\n    res.status(401).json({\n      success: false,\n      message: error instanceof Error ? error.message : \"Unauthorized\",\n    });\n  }\n};\n","import { Router } from \"express\";\nexport const adminRouter = Router();\nimport { adminModel, courseModel } from \"../../db/db\";\nimport { signinSchema, signupSchema, courseSchema } from \"../../schema/schema\";\nimport jwt from \"jsonwebtoken\";\nimport { adminMiddleware } from \"../../middlewares/admin\";\nimport { Request, Response, NextFunction } from \"express\";\nadminRouter.post(\"/signup\", async function (req, res) {\n  try {\n    const body = req.body;\n    const parsedBody = signupSchema.safeParse(body);\n    if (!parsedBody.success) {\n      const errorMessages = parsedBody.error.errors\n        .map((err) => err.message)\n        .join(\", \");\n      return res.status(400).json({\n        success: false,\n        message: errorMessages,\n      });\n    }\n    const { email, password, firstName, lastName } = parsedBody.data;\n    const admin = await adminModel.create({\n      email,\n      password,\n      firstName,\n      lastName,\n      courses: [],\n    });\n    const token = jwt.sign(\n      {\n        email: admin.email,\n        id: admin._id,\n      },\n      process.env.JWT_SECRET_ADMIN || \"\"\n    );\n    //do cookies\n    res.status(200).json({\n      success: true,\n      admin,\n      token: token,\n      message: \"Admin and course created successfully\",\n    });\n  } catch (error: Error | any) {\n    if (error instanceof Error && (error as any).code === 11000) {\n      // Unique constraint error code\n      return res.status(400).json({\n        success: false,\n        error: \"Email already exists\",\n        message: \"Email already in use\",\n      });\n    } else {\n      // Handle other errors\n      return res.status(500).json({\n        success: false,\n        error: error.message,\n        message: \"Internal server error\",\n      });\n    }\n  }\n});\n\nadminRouter.post(\"/signin\", async function (req, res) {\n  try {\n    const body = req.body;\n    const parsedBody = signinSchema.safeParse(body);\n    if (!parsedBody.success) {\n      const errorMessages = parsedBody.error.errors\n        .map((err) => err.message)\n        .join(\", \");\n      return res.status(400).json({\n        success: false,\n        message: errorMessages,\n      });\n    }\n    const { email, password } = parsedBody.data;\n    const admin = await adminModel.findOne({ email });\n    if (!admin) {\n      return res.status(400).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n    }\n    if (admin.password !== password) {\n      return res.status(400).json({\n        success: false,\n        message: \"Invalid email or password\",\n      });\n    }\n\n    const token = jwt.sign(\n      {\n        email: admin.email,\n        id: admin._id,\n      },\n      process.env.JWT_SECRET_ADMIN || \"\"\n    );\n    //do cookies\n    return res.status(200).json({\n      success: true,\n      token: \"Bearer \" + token,\n      message: \"Signin successful\",\n      admin,\n    });\n  } catch (error: Error | any) {\n    return res.status(500).json({\n      success: false,\n      error: error.message,\n      message: \"Internal server error\",\n    });\n  }\n});\n\nadminRouter.post(\"/course\", adminMiddleware, async function (req, res) {\n  try {\n    const adminId = req.adminId;\n    const body = req.body;\n    const parsedBody = courseSchema.safeParse(body);\n    if (!parsedBody.success) {\n      return res.status(400).json({\n        success: false,\n        message:\n          \"Validation error: \" +\n          parsedBody.error.errors\n            .map((err) => `${err.path[0]} ${err.message}`)\n            .join(\", \"),\n      });\n    }\n    const { title, description, imageUrl, price } = parsedBody.data;\n\n    const course = await courseModel.create({\n      title,\n      description,\n      imageUrl,\n      price,\n      creatorId: adminId,\n    });\n\n    await adminModel.findByIdAndUpdate(adminId, {\n      $push: { courses: course._id },\n    });\n    res.json({\n      message: \"Course created\",\n      courseId: course._id,\n    });\n  } catch (error: Error | any) {\n    res.status(500).json({\n      success: false,\n      message: `Error creating course: ${error.message}`,\n    });\n  }\n});\n\nadminRouter.put(\"/course\", adminMiddleware, async function (req, res) {\n  try {\n    const adminId = req.adminId;\n    const body = req.body;\n    const parsedBody = courseSchema.safeParse(body);\n    if (!parsedBody.success) {\n      return res.status(400).json({\n        success: false,\n        message:\n          \"Validation error: \" +\n          parsedBody.error.errors.map((err) => err.message).join(\", \"),\n      });\n    }\n    const { title, description, price, imageUrl, courseId } = parsedBody.data;\n    const course = await courseModel.findOneAndUpdate(\n      { _id: courseId, creatorId: adminId },\n      { title, description, price, imageUrl },\n      { new: true }\n    );\n    if (!course) {\n      return res.status(404).json({\n        success: false,\n        message: \"Course not found\",\n      });\n    }\n    res.status(200).json({\n      success: true,\n      message: \"Course updated successfully\",\n      course,\n    });\n  } catch (error: Error | any) {\n    console.error(error); // log the error\n    res.status(500).json({\n      success: false,\n      message: `Error updating course: ${error.message}`,\n    });\n  }\n});\n\nadminRouter.get(\"/course/bulk\",adminMiddleware,\n  async function (req: Request, res: Response) {\n    const adminId = req.adminId;\n    const courses = await courseModel.find({ creatorId: adminId });\n    res.status(200).json({\n      success: true,\n      message: \"course endpoint\",\n      courses,\n    });\n  }\n);\n","import { NextFunction, Request, Response } from \"express\";\nimport jwt, { JwtPayload } from \"jsonwebtoken\";\n\nexport const adminMiddleware = async (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  try {\n    const token = req.headers.authorization?.split(\" \")[1];\n    if (!token) {\n      throw new Error(\"Authorization token is missing or invalid\");\n    }\n    const decoded = jwt.verify(\n      token,\n      process.env.JWT_SECRET_ADMIN || \"\"\n    ) as JwtPayload;\n\n    if (decoded) {\n      req.adminId = decoded.id;\n      next();\n    } \n    else{\n      throw new Error(\"Invalid token payload or jwt secret\");\n    }\n  } catch (error) {\n    res.status(401).json({\n      success: false,\n      message: error instanceof Error ? error.message : \"Unauthorized\",\n    });\n  }\n};\n","import express from \"express\";\nimport { courseModel, purchaseModel, userModel } from \"../../db/db\";\nimport { userMiddleware } from \"../../middlewares/user\";\nexport const courseRouter = express.Router();\ncourseRouter.post(\"/purchase\", userMiddleware, async function (req, res) {\n  try {\n    const userId = req.userId;\n    const courseId = req.body.courseId;\n    // you would expect the user to pay you money\n    await purchaseModel.create({\n      userId,\n      courseId,\n    });\n    await userModel.findByIdAndUpdate(userId, {\n      $push: { courses: courseId },\n    });\n    res.json({\n      message: \"Course purchased successfully\",\n    });\n  } catch (error : Error | any) {\n    console.error(error);\n    res.status(500).json({\n      message: \"Error purchasing course\",\n      error: error.message,\n    });\n  }\n});\n\ncourseRouter.get(\"/\", async function (req, res) {\n  const courses = await courseModel.find();\n  res.status(200).json({\n    success: true,\n    message: \"Courses fetched successfully\",\n    courses: courses\n  })\n});\n"],"mappings":"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","names":["express","dotenv","courseSchema","jwt","jwt","Router","jwt","jwt","Router","jwt","courseSchema","mongoose","dotenv","express"]}